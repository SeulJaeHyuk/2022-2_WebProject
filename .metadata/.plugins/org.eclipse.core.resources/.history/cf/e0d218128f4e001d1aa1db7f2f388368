package cs.dit.board;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.util.ArrayList;

public class CommentsDao {

	private Connection getConnection() throws Exception{
		
	}
	
	public ArrayList<BoardDto> list(int page, int numOfRecordes){
		String sql = "SELECT * FROM board order by bcode desc limit ?, ?";
		ArrayList<BoardDto> dtos = new ArrayList<BoardDto>();
		
		try (	Connection con = getConnection();
				PreparedStatement pstmt = con.prepareStatement(sql)
			)
		{ pstmt.setInt(1, (page-1)*numOfRecordes);
		  pstmt.setInt(2, page*numOfRecordes);
		  try(ResultSet rs = pstmt.executeQuery();){
			  while(rs.next()) {
					BoardDto dto = new BoardDto();
					
					dto.setBcode(rs.getInt("bcode"));
					dto.setSubject(rs.getString("subject"));
					dto.setContent(rs.getString("content"));
					dto.setWriter(rs.getString("writer"));
					dto.setRegDate(rs.getDate("regDate"));
					
					//2. 위에서 만들어진 dto를 ArrayList 인 dtos에 차례로 입력하세요.
					dtos.add(dto);
				}
		  }
				

			} catch (Exception e) {
				e.printStackTrace();
			} 
		return dtos;
	}
}
